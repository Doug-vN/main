
# Class Communicative


[**Class List**](annotated.md) **>** [**Communicative**](class_communicative.md)



_A class to manage communication with slave module._ [More...](#detailed-description)

* `#include <Communicative.h>`















## Public Functions

| Type | Name |
| ---: | :--- |
|   | [**Communicative**](class_communicative.md#function-communicative) (const int CS) <br>_Constructor._  |
|  [**Data**](struct_data.md) | [**RequestData**](class_communicative.md#function-requestdata) (const mCmd) <br>_Performs a complete transaction; expects Slave to Reply with a_ [_**Data**_](struct_data.md) _object._ |
|  [**Identity**](struct_identity.md) | [**RequestIdentity**](class_communicative.md#function-requestidentity) (const mCmd) <br>_Performs a complete transaction; expects Slave to Reply with_ [_**Identity**_](struct_identity.md) _object._ |
|  [**sCmd**](structs_cmd.md) | [**RequestReply**](class_communicative.md#function-requestreply) (const mCmd) <br>_Performs a complete transaction; expects Slave to Reply with_ [_**sCmd**_](structs_cmd.md) _object._ |
|  bool | [**isPeripheralConnected**](class_communicative.md#function-isperipheralconnected) (void) <br>_Checks whether Slave is connected._  |
|   | [**~Communicative**](class_communicative.md#function-communicative) (void) <br>_Destructor._  |








# Detailed Description


This class is designed for SPI communication with a slave device. The class responsibilities include both SPI initialisation and fundamental transactions. The transaction protocol implemented follows the following flow: Clear SS -&gt; Send '?' to slave -&gt; recieve 'ACK' (0x06) from slave -&gt; send request [**mCmd**](structm_cmd.md) -&gt; recieve sCmd/Data/Identity as expected -&gt; set SS. Where [**mCmd**](structm_cmd.md), [**sCmd**](structs_cmd.md), [**Data**](struct_data.md) and [**Identity**](struct_identity.md) are structures defined as types. 


    
## Public Functions Documentation


### <a href="#function-communicative" id="function-communicative">function Communicative </a>


```cpp
Communicative::Communicative (
    const int CS
) 
```


Constructor initialises the SS pin to be used in communications and initialises SPI as [**Master**](class_master.md). 

**Parameters:**


* CS is the Slave Select pin designation; most commonly PA4. 



**See also:** SPISetup() 



        

### <a href="#function-requestdata" id="function-requestdata">function RequestData </a>


```cpp
Data Communicative::RequestData (
    const mCmd
) 
```


Executes a complete transaction: Clear SS -&gt; Send '?' to slave -&gt; recieve 'ACK' (0x06) from slave -&gt; send request [**mCmd**](structm_cmd.md) -&gt; recieve [**Data**](struct_data.md) -&gt; set SS. 

**Parameters:**


* [**mCmd**](structm_cmd.md) is the [**mCmd**](structm_cmd.md) object which constitutes the Request made to the slave. 



**Returns:**

The [**Data**](struct_data.md) object generated by the Slave containing a two dimensional array of data points and the length, headings and units of the data array rows. 




**See also:** [**RequestReply()**](class_communicative.md#function-requestreply), [**RequestIdentity()**](class_communicative.md#function-requestidentity) 



        

### <a href="#function-requestidentity" id="function-requestidentity">function RequestIdentity </a>


```cpp
Identity Communicative::RequestIdentity (
    const mCmd
) 
```


Executes a complete transaction: Clear SS -&gt; Send '?' to slave -&gt; recieve 'ACK' (0x06) from slave -&gt; send request [**mCmd**](structm_cmd.md) -&gt; recieve [**Identity**](struct_identity.md) -&gt; set SS. 

**Parameters:**


* [**mCmd**](structm_cmd.md) is the [**mCmd**](structm_cmd.md) object which constitutes the Request made to the slave. 



**Returns:**

The Idenity object generated by the Slave containing the Slave ID and name. 




**See also:** [**RequestReply()**](class_communicative.md#function-requestreply), [**RequestData()**](class_communicative.md#function-requestdata) 



        

### <a href="#function-requestreply" id="function-requestreply">function RequestReply </a>


```cpp
sCmd Communicative::RequestReply (
    const mCmd
) 
```


Executes a complete transaction: Clear SS -&gt; Send '?' to slave -&gt; recieve 'ACK' (0x06) from slave -&gt; send request [**mCmd**](structm_cmd.md) -&gt; recieve [**sCmd**](structs_cmd.md) -&gt; set SS. 

**Parameters:**


* [**mCmd**](structm_cmd.md) is the [**mCmd**](structm_cmd.md) object which constitutes the Request made to the slave. 



**Returns:**

The [**sCmd**](structs_cmd.md) object generated by the Slave as the reply to the request. 




**See also:** [**RequestIdentity()**](class_communicative.md#function-requestidentity), [**RequestData()**](class_communicative.md#function-requestdata) 



        

### <a href="#function-isperipheralconnected" id="function-isperipheralconnected">function isPeripheralConnected </a>


```cpp
bool Communicative::isPeripheralConnected (
    void
) 
```


Executes a nop transaction. 

**Returns:**

true if handshake is successful and Slave responds to '?' with 'ACK' 




**See also:** areYouAlive() 



        

### <a href="#function-communicative" id="function-communicative">function ~Communicative </a>


```cpp
Communicative::~Communicative (
    void
) 
```


Executes SPI.end(); 


        

------------------------------
The documentation for this class was generated from the following file `Communicative.h`